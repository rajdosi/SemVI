DATA SEGMENT
	FILENAME DB 80 DUP(0)
	LENFILENAME EQU $-FILENAME	
	BUFFER DB 256 DUP(0)
	LENBUFFER EQU $-BUFFER
	FILEHANDLE DW ?
	READCOUNT DW ?
DATA ENDS
MYSTK SEGMENT STACK
	DW 100 DUP(0)
	TOS LABEL WORD
MYSTK ENDS
CODE SEGMENT
ASSUME	CS:CODE, DS:DATA, SS:MYSTK
START:	MOV AX, DATA
	MOV DS, AX
	MOV AX, MYSTK
	MOV SS, AX
	LEA SP, TOS

	;READ FILENAME
	LEA BX, FILENAME
	MOV BYTE PTR[BX], LENFILENAME -2

	MOV AH, 0AH
	LEA DX, FILENAME
	INT 21H
	
	; PUT 00H AT THE END OF FILENAME
	MOV CL, [BX+1]
	MOV CH, 00
	ADD BX, 02
	ADD BX, CX
	MOV BYTE PTR[BX], 00H

	; OPEN FILE
	MOV AH, 3DH
	LEA DX, FILENAME
	ADD DX, 02
	MOV AL, 00	;R EAD ONLY MODE
	INT 21H

	JC ERROR
	MOV FILEHANDLE, AX

	;READ FROM FILE
NEXT:	MOV AH, 3FH
	MOV BX, FILEHANDLE
	MOV CX, LENBUFFER 
	LEA DX, BUFFER
	INT 21H
	
	MOV READCOUNT, AX
	
	MOV AH, 40H
	MOV BX, 01
	MOV CX, READCOUNT
	LEA DX, BUFFER
	INT 21H

	CMP READCOUNT, 00
	JBE DONE
	JMP NEXT	
	
DONE:	

ERROR:	MOV AH, 4CH
	INT 21H




CODE ENDS
	END START